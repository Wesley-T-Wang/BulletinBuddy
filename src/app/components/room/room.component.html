<!-- Section: Blog v.1 -->
<section class="my-5">
  <!-- *ngIf="posts && posts.length > 0" -->
  <!-- Section heading -->
  <h2 class="h1-responsive font-weight-bold text-center my-5">Posts</h2>
  <!-- Section description -->
  <p class="text-center w-responsive mx-auto mb-5">
    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore
    eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
    sunt in culpa qui officia deserunt mollit anim id est laborum.
  </p>

  <div *ngFor="let post of posts; let i = index" style="margin-bottom: 20px">
    <div *ngIf="i % 2 == 0; else rightBlock">
      <hr class="my-5" />
      <!-- Grid row -->
      <div class="row">
        <!-- Grid column -->
        <div class="col-lg-5">
          <!-- Featured image -->
          <div
            class="view overlay rounded z-depth-2 mb-lg-0 mb-4 waves-light"
            mdbWavesEffect
          >
            <img class="img-fluid" src="{{ post.image }}" alt="Sample image" />
            <a>
              <div class="mask rgba-white-slight"></div>
            </a>
          </div>
        </div>
        <!-- Grid column -->
        <!-- Grid column -->
        <div class="col-lg-7">
          <!-- Category -->
          <a  class="green-text">
            <h6 class="font-weight-bold mb-3">
              <i *ngIf="post.categoryID"[ngClass]="{'fa-sort-amount-up':4, 'fa-utensils':1, 'fa-suitcase': 2, 'fa-glass-cheers': 3}" class="fas"></i>&nbsp; {{post.category.name}}
            </h6>
          </a>
          <!-- Post title -->
          <h3 class="font-weight-bold mb-3">
            <strong>{{ post.title }}</strong>
          </h3>
          <!-- Excerpt -->
          <p>{{ post.message }}</p>
          <!-- Post data -->
          <p>
            by
            <a
              ><strong>{{ post.user.username }}</strong></a
            >, {{ timePosted(post.createdDate) }}
          </p>

          <!-- Read more button -->
          <h3 class="font-weight-bold mb-3">
            <strong>{{ post.rating }}&nbsp; </strong>
            <button mdbBtn color="success" (click)="upvote(i)"mdbWavesEffect
              ><i class="fas fa-arrow-up"></i
            ></button>
            <button mdbBtn color="success" (click)="downvote(i)"mdbWavesEffect
              ><i class="fas fa-arrow-down"></i
            ></button>
            <span *ngIf="isCurrentUser(i)">
              <button
              mdbBtn
              color="success"
              (click)="deletePost(post.postID, i)"
              mdbWavesEffect
            >
              Delete
              </button>
            <button mdbBtn color="success" (click)="update(i)" mdbWavesEffect> Update </button>
            </span>

          </h3>
        </div>
        <!-- Grid column -->
      </div>
    </div>
    <ng-template #rightBlock>
      <hr class="my-5" />

      <!-- Grid row -->
      <div class="row">
        <!-- Grid column -->
        <div class="col-lg-7">
          <!-- Category -->
          <a  class="pink-text">
            <h6 class="font-weight-bold mb-3">
              <i *ngIf="post.categoryID"[ngClass]="{'fa-sort-amount-up':4, 'fa-utensils':1, 'fa-suitcase': 2, 'fa-glass-cheers': 3}"  class="fas"></i> &nbsp; {{post.category.name}}
            </h6>
          </a>
          <!-- Post title -->
          <h3 class="font-weight-bold mb-3">
            <strong>{{ post.title }}</strong>
          </h3>
          <!-- Excerpt -->
          <p>{{ post.message }}</p>
          <!-- Post data -->
          <p>
            by
            <a
              ><strong>{{ post.user.username }}</strong></a
            >, {{ timePosted(post.createdDate) }}
          </p>
          <!-- Read more button -->
          <h3 class="font-weight-bold mb-3">
            <strong> {{ post.rating }} &nbsp;</strong>

            <button mdbBtn color="pink" (click)="upvote(i)"mdbWavesEffect
              ><i class="fas fa-arrow-up"></i
            ></button>
            <button mdbBtn color="pink" (click)="downvote(i)"mdbWavesEffect
              ><i class="fas fa-arrow-down"></i
            ></button>
            <span *ngIf="isCurrentUser(i)">
              <button
              mdbBtn
              color="pink"
              (click)="deletePost(post.postID, i)"
              mdbWavesEffect
            >
              Delete
              </button>
            <button mdbBtn color="pink" (click)="update(i)" mdbWavesEffect> update </button>
            </span>

          </h3>

          <!-- <a mdbBtn color="pink" mdbWavesEffect class="mb-lg-0 mb-4" (click)="deletePost(post.postID,i)" >Read more</a> -->
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-lg-5">
          <!-- Featured image -->
          <div
            class="view overlay rounded z-depth-2 waves-light"
            mdbWavesEffect
          >
            <img
              class="img-fluid"
              src="{{ post.image }}"
              alt="Ayo this image is broken"
            />
            <a>
              <div class="mask rgba-white-slight"></div>
            </a>
          </div>
        </div>
        <!-- Grid column -->
      </div>
      <!-- Grid row -->
    </ng-template>
  </div>

  <!-- Section: Blog v.1 -->
  <div *ngIf="showCreation; else createButton">

    <div *ngIf="posts.length % 2 == 0; else postRight">
      <hr class="my-5" />

      <!-- Grid row -->
      <div class="row">
        <div class="col-lg-5">
          <div class="view overlay rounded z-depth-2 waves-light" mdbWavesEffect>
            <img
              class="img-fluid"
              src="https://cdn.discordapp.com/attachments/168572195075915776/858518609424154654/masters.PNG"
              alt="Sample image"
            />
            <a>
              <div class="mask rgba-white-slight"></div>
            </a>
          </div>

          <div class="md-form md-outline form-lg font-weight-bold pink-text mb-3">
            <input
              name="imagePink"
              id="imagePink"
              class="form-control form-control-lg"
              type="text"
              [(ngModel)]="imageInput"
              mdbInput
            />
            <label for="imagePink">Image URL</label>
          </div>
        </div>

        <!-- Grid column -->
        <div class="col-lg-7">
          <!-- Category -->
          <h3 class="font-weight-bold mb-3">
            <strong>Create Post</strong>
          </h3>
          <!-- Post title -->
          <div class="md-form md-outline form-lg font-weight-bold pink-text mb-3">
            <input
              id="form-lg"
              class="form-control form-control-lg"
              type="text"
              [(ngModel)]="titleInput"
              mdbInput
            />
            <label for="form-lg">Title</label>
          </div>

          <!-- Excerpt -->
          <p></p>

          <div class="md-form md-outline green-text">
            <textarea
              type="text"
              id="form75"
              class="form-control mb-3 md-textarea"
              rows="2.5"
              [(ngModel)]="messageInput"
              mdbInput
            ></textarea>
            <label for="form75">Message</label>
          </div>

          <div class="dropdown" mdbDropdown>
            <button
              mdbDropdownToggle
              mdbBtn
              color="success"
              class="dropdown-toggle waves-light"
              type="button"
              mdbWavesEffect
            >
            {{categoryInputName}}
            </button>
            <button [disabled]="!canPost" mdbBtn color="success" mdbWavesEffect (click)="postPost()">Post</button>

            <div class="dropdown-menu dropdown-primary">
              <button class="dropdown-item" (click)="setCategory(1)">
                <i class="fas fa-utensils"></i>&nbsp; Food
              </button>
              <button class="dropdown-item" (click)="setCategory(2)">
                <i class="fas fa-suitcase"></i>&nbsp; Travel
              </button>
              <button class="dropdown-item" (click)="setCategory(3)">
                <i class="fas fa-glass-cheers"></i>&nbsp; Hangout
              </button>
              <button class="dropdown-item" (click)="setCategory(4)">
                <i class="fas fa-sort-amount-up"></i>&nbsp; Poll
              </button>
            </div>
          </div>

          <!-- <input type="text" class="mb-3" placeholder="message"> -->
          <!-- <p>message</p> -->
          <!-- Post data -->
          <!-- <p>by <a><strong>{{displayUser}}</strong></a></p> -->
          <!-- Read more button -->
        </div>
        <!-- Grid column -->
      </div>
      <button (click)="toggleShowCreation()" mdbBtn type="button" gradient="purple" block="true" size="lg" mdbWavesEffect>Cancel</button>
    </div>


    <ng-template #postRight>
      <!-- Grid row -->

      <hr class="my-5" />

      <!-- Grid row -->
      <div class="row">
        <!-- Grid column -->
        <div class="col-lg-7">
          <h3 class="font-weight-bold mb-3">
            <strong>Create Post</strong>
          </h3>
          <!-- Category -->

          <div
            class="md-form md-outline form-lg font-weight-bold green-text mb-3"
          >
            <input
              id="form-lg"
              class="form-control form-control-lg"
              type="text"
              [(ngModel)]="titleInput"
              mdbInput
            />
            <label for="form-lg">Title</label>
          </div>

          <div class="md-form md-outline pink-text">
            <textarea
              type="text"
              id="form75"
              class="form-control mb-3 md-textarea"
              rows="2.5"
              [(ngModel)]="messageInput"
              mdbInput
            ></textarea>
            <label for="form75">Message</label>
          </div>
          <!-- Post data -->
          <!-- <p>by <a><strong>{{post.user.username}}</strong></a>, 14/08/2018</p> -->
          <!-- Read more button -->
          <!-- <a href="" class="green-text">
            <h6 class="font-weight-bold mb-3"><mdb-icon fas icon="utensils" class="pr-2"></mdb-icon>Food</h6>
          </a> -->
          <div  class="dropdown" mdbDropdown>
            <button
              mdbDropdownToggle
              mdbBtn
              color="pink"
              class="dropdown-toggle waves-light"
              type="button"
              mdbWavesEffect
            >
              {{categoryInputName}}
            </button>
            <button [disabled]="!canPost" mdbBtn color="pink" mdbWavesEffect (click)="postPost()">Post</button>

            <div class="dropdown-menu dropdown-primary">
              <button class="dropdown-item" (click)="setCategory(1)">
                <i class="fas fa-utensils"></i>&nbsp; Food
              </button>
              <button class="dropdown-item" (click)="setCategory(2)">
                <i class="fas fa-suitcase"></i>&nbsp; Travel
              </button>
              <button class="dropdown-item" (click)="setCategory(3)">
                <i class="fas fa-glass-cheers"></i>&nbsp; Hangout
              </button>
              <button class="dropdown-item" (click)="setCategory(4)">
                <i class="fas fa-sort-amount-up"></i>&nbsp; Poll
              </button>
            </div>
          </div>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->

        <div class="col-lg-5">
          <div class="view overlay rounded z-depth-2 waves-light" mdbWavesEffect>
            <img
              class="img-fluid"
              src="https://cdn.discordapp.com/attachments/168572195075915776/858518609424154654/masters.PNG"
              alt="Sample image"
            />
            <a>
              <div class="mask rgba-white-slight"></div>
            </a>
          </div>

          <div class="md-form md-outline form-lg font-weight-bold pink-text mb-3">
            <input
              name="imagePink"
              id="imagePink"
              class="form-control form-control-lg"
              type="text"
              [(ngModel)]="imageInput"
              mdbInput
            />
            <label for="imagePink">Image URL</label>
          </div>
        </div>

        <!-- Grid column -->
      </div>
      <button mdbBtn type="button" (click)="toggleShowCreation()" gradient="purple" block="true" size="lg" mdbWavesEffect>Cancel</button>
      <!-- Grid row -->
    </ng-template>
  </div>
  <ng-template #createButton>
    <button mdbBtn type="button" (click)="toggleShowCreation()" gradient="purple" block="true" size="lg" mdbWavesEffect>Create Post</button>
  </ng-template>

</section>

